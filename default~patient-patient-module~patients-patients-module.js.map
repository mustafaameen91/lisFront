{"version":3,"sources":["./src/app/patient/patient.page.scss","./src/app/patient/patient.page.html","./node_modules/ngx-webcam/__ivy_ngcc__/fesm2015/ngx-webcam.js","./src/app/patient/patient.page.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAe,4EAAa,gBAAgB,4BAA4B,GAAG,6CAA6C,2TAA2T,E;;;;;;;;;;;;ACAnb;AAAe,wPAAyL,WAAW,47DAA47D,0BAA0B,i7CAAi7C,cAAc,qrFAAqrF,OAAO,wMAAwM,qBAAqB,ghDAAghD,E;;;;;;;;;;;;ACAjhQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA4F;AAC7C;;AAE/C;AACA;AACA;AACA;AACwC;AACE;;AAE1C;AACA;AACA,kDAAkD;AAClD,gBAAgB,8DAAuB;AACvC,IAAI,4DAAqB;AACzB,IAAI,wDAAiB,0EAA0E,CAAC,2DAAoB,MAAM,gBAAgB,2DAAoB,GAAG,sCAAsC,EAAE;AACzM,IAAI,0DAAmB;AACvB,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,UAAU;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,0DAAY;AAC5C;AACA,6BAA6B,0DAAY;AACzC;AACA,8BAA8B,0DAAY;AAC1C;AACA,kCAAkC,0DAAY;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA,iDAAiD;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,iCAAiC,eAAe;AAChD;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,+BAA+B;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA,qCAAqC,8CAA8C;AACnF,aAAa;AACb;AACA;AACA,iCAAiC,sDAAsD;AACvF;AACA;AACA;AACA;AA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","file":"default~patient-patient-module~patients-patients-module.js","sourcesContent":["export default \"ion-select {\\n  width: 100%;\\n  justify-content: center;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3BhdGllbnQucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksV0FBQTtFQUVBLHVCQUFBO0FBQUoiLCJmaWxlIjoicGF0aWVudC5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpb24tc2VsZWN0IHtcbiAgICB3aWR0aDogMTAwJTtcbiAgXG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIH0iXX0= */\";","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title *ngIf=\\\"isNewPatient\\\">\\n        Add new patient\\n    </ion-title>\\n    <ion-title *ngIf=\\\"!isNewPatient && data.name != ''\\\">\\n        {{data.name}}\\n    </ion-title>\\n    <ion-buttons *ngIf=\\\"!isNewPatient && data.name != ''\\\" slot=\\\"end\\\">\\n      <ion-button fill=\\\"solid\\\" color=\\\"success\\\" [routerLink]=\\\"'/patients/' + data['idPatient'] + '/tests'\\\">\\n        <ion-icon slot=\\\"start\\\" name=\\\"add\\\"></ion-icon>\\n        ADD NEW TEST\\n      </ion-button>\\n    </ion-buttons>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"ion-padding\\\">\\n\\n\\n  <ion-grid fixed>\\n    <ion-row>\\n      <ion-col size=\\\"6\\\">\\n        <ion-card mode=\\\"ios\\\">\\n          <ion-card-content>\\n            <ion-list-header>\\n              <ion-label>PERSONAL INFO</ion-label>\\n            </ion-list-header>\\n            <ion-list>\\n              <ion-item>\\n                <ion-label position=\\\"floating\\\">Full name <ion-text color=\\\"danger\\\">*</ion-text></ion-label>\\n                <ion-input [(ngModel)]=\\\"data.name\\\" required></ion-input>\\n              </ion-item>\\n              <ion-item>\\n                <ion-label position=\\\"floating\\\">Second language name <ion-text color=\\\"danger\\\">*</ion-text></ion-label>\\n                <ion-input [(ngModel)]=\\\"data.enName\\\" required></ion-input>\\n              </ion-item>\\n              <ion-item>\\n                <ion-label position=\\\"floating\\\">Birthdate <ion-text color=\\\"danger\\\">*</ion-text></ion-label>\\n                <!-- <ion-datetime (ionChange)=\\\"fixDate()\\\"  mode=\\\"md\\\" displayFormat=\\\"YYYY-MM-DD\\\"></ion-datetime> -->\\n                <ion-input (ionChange)=\\\"fixDate()\\\" type=\\\"date\\\" placeholder=\\\"Birthdate\\\" [(ngModel)]=\\\"data.dob\\\"></ion-input>\\n              </ion-item>\\n              <br>\\n              <ion-item>\\n                <!-- \\n                <ion-select [(ngModel)]=\\\"data.nationalityId\\\"  mode=\\\"md\\\" placeholder=\\\"Select One\\\">\\n                  <ion-select-option *ngFor=\\\"let nationality of nationalities\\\" [value]=\\\"nationality.idNationality\\\">{{nationality.nationalName}}</ion-select-option>\\n                </ion-select> -->\\n                <ion-label>Nationality <ion-text color=\\\"danger\\\">*</ion-text></ion-label>\\n                <ionic-selectable\\n                [(ngModel)]=\\\"data.nationalityId\\\"\\n                [items]=\\\"nationalities\\\"\\n                itemValueField=\\\"idNationality\\\"\\n                itemTextField=\\\"nationalName\\\"\\n                [canSearch]=\\\"true\\\">\\n              </ionic-selectable>\\n\\n\\n              </ion-item>\\n              <br>\\n              <ion-item>\\n                <ion-label>Gender <ion-text color=\\\"danger\\\">*</ion-text></ion-label>\\n                <ion-select [(ngModel)]=\\\"data.gender\\\"  mode=\\\"md\\\" placeholder=\\\"Select One\\\">\\n                  <ion-select-option value=\\\"1\\\">Female</ion-select-option>\\n                  <ion-select-option value=\\\"0\\\">Male</ion-select-option>\\n                </ion-select>\\n              </ion-item>\\n              <br>\\n              <ion-item>\\n                <ion-label>Document ID <ion-text color=\\\"danger\\\">*</ion-text></ion-label>\\n                <ion-input (ionChange)=\\\"generateEmail()\\\" (change)=\\\"search()\\\" [(ngModel)]=\\\"data.documentId\\\"  required></ion-input>\\n                <ion-button slot=\\\"end\\\" fill=\\\"clear\\\" (click)=\\\"fileSelect.click()\\\">\\n                  <ion-icon slot=\\\"start\\\" name=\\\"scan\\\"></ion-icon>\\n                  SCAN\\n                </ion-button>\\n              </ion-item>\\n\\n              {{documentName}}\\n              <input style=\\\"display: none\\\" #fileSelect (change)=\\\"onFileChange($event)\\\" type=\\\"file\\\" id=\\\"fileUpload\\\">\\n\\n              <img *ngIf=\\\"isNewPatient\\\" src=\\\"assets/icon/passport.jpeg\\\" alt=\\\"\\\">\\n              <img *ngIf=\\\"!isNewPatient\\\" [src]=\\\"api + data.documentPhoto.photoPath\\\" alt=\\\"\\\">\\n            </ion-list>\\n          </ion-card-content>\\n        </ion-card>\\n      </ion-col>\\n      <ion-col size=\\\"6\\\">\\n        <ion-card mode=\\\"ios\\\">\\n          <ion-card-content>\\n            <ion-list-header>\\n              <ion-label>ADDITIONAL INFO</ion-label>\\n            </ion-list-header>\\n            <ion-item>\\n              <ion-label position=\\\"floating\\\">Phone <ion-text color=\\\"danger\\\">*</ion-text></ion-label>\\n              <ion-input [(ngModel)]=\\\"data.phone\\\" type=\\\"number\\\" required></ion-input>\\n            </ion-item>\\n            <ion-item>\\n              <ion-label position=\\\"floating\\\">Address <ion-text color=\\\"danger\\\">*</ion-text></ion-label>\\n              <ion-input [(ngModel)]=\\\"data.address\\\" type=\\\"text\\\" required></ion-input>\\n            </ion-item>\\n            <ion-item>\\n              \\n              <ion-label position=\\\"floating\\\">Email address <ion-text color=\\\"danger\\\">*</ion-text></ion-label>\\n              <ion-input [(ngModel)]=\\\"data.email\\\" required></ion-input>\\n            </ion-item>\\n            <ion-row>\\n              <ion-col size=\\\"6\\\">\\n                <ion-item>\\n                  <ion-label position=\\\"floating\\\">Height</ion-label>\\n                  <ion-input [(ngModel)]=\\\"data.height\\\" type=\\\"number\\\"></ion-input>\\n                </ion-item>\\n              </ion-col>\\n              <ion-col size=\\\"6\\\">\\n                <ion-item>\\n                  <ion-label position=\\\"floating\\\">Weight</ion-label>\\n                  <ion-input [(ngModel)]=\\\"data.weight\\\" type=\\\"number\\\"></ion-input>\\n                </ion-item>\\n              </ion-col>\\n            </ion-row>\\n            <br>\\n            <ion-item>\\n              <ion-label>Is patient a smoker</ion-label>\\n              <ion-toggle [(ngModel)]=\\\"data.smoker\\\" slot=\\\"end\\\"></ion-toggle>\\n            </ion-item>\\n            <br>\\n            <ion-item>\\n              <ion-label>Relationship</ion-label>\\n              <ion-select [(ngModel)]=\\\"data.relationship\\\" mode=\\\"md\\\" value=\\\"0\\\" placeholder=\\\"Select One\\\">\\n                <ion-select-option value=\\\"0\\\">Single</ion-select-option>\\n                <ion-select-option value=\\\"1\\\">Married</ion-select-option>\\n              </ion-select>\\n            </ion-item>\\n            <br>\\n            <ion-item>\\n              <img src=\\\"assets/icon/iraqmosafer.png\\\" height=\\\"30px\\\" alt=\\\"\\\">\\n              <ion-label> &nbsp; &nbsp; Integrate with IRAQ MOSAFER</ion-label>\\n              <ion-toggle [(ngModel)]=\\\"muna\\\" slot=\\\"end\\\"></ion-toggle>\\n            </ion-item>\\n            <br>\\n              <img style=\\\"width: 300px; border-radius: 20px;\\\" [src]=\\\"snapshot\\\" *ngIf=\\\"snapshot != ''\\\" alt=\\\"\\\">\\n              <webcam [height]=\\\"300\\\" [width]=\\\"300\\\" [trigger]=\\\"triggerObservable\\\" (imageCapture)=\\\"handleImage($event)\\\" *ngIf=\\\"showWebcam\\\"\\n\\t\\t [allowCameraSwitch]=\\\"allowCameraSwitch\\\" [switchCamera]=\\\"nextWebcamObservable\\\" [videoOptions]=\\\"videoOptions\\\" (cameraSwitched)=\\\"cameraWasSwitched($event)\\\"\\n\\t\\t (initError)=\\\"handleInitError($event)\\\"></webcam>\\n\\n              <ion-button *ngIf=\\\"snapshot == ''\\\" expand=\\\"block\\\" (click)=\\\"triggerSnapshot()\\\">\\n                <ion-icon slot=\\\"start\\\" name=\\\"camera-outline\\\"></ion-icon>\\n                ADD PATIENT PHOTO\\n              </ion-button>\\n              <ion-button color=\\\"warning\\\" *ngIf=\\\"snapshot != ''\\\" expand=\\\"block\\\" (click)=\\\"retakePhoto()\\\">\\n                <ion-icon slot=\\\"start\\\" name=\\\"camera-reverse-outline\\\"></ion-icon>\\n                RETAKE PATIENT PHOTO\\n              </ion-button>\\n          </ion-card-content>\\n        </ion-card>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n\\n\\n  <ion-fab *ngIf=\\\"isNewPatient\\\" mode=\\\"ios\\\" vertical=\\\"top\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\">\\n    <ion-fab-button (click)=\\\"save()\\\" color=\\\"success\\\">\\n      <ion-icon name=\\\"checkmark\\\"></ion-icon>\\n    </ion-fab-button>\\n  </ion-fab>\\n\\n  <ion-fab *ngIf=\\\"!isNewPatient\\\" mode=\\\"ios\\\" vertical=\\\"top\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\">\\n    <ion-fab-button (click)=\\\"edit()\\\" color=\\\"success\\\">\\n      <ion-icon name=\\\"create\\\"></ion-icon>\\n    </ion-fab-button>\\n  </ion-fab>\\n\\n</ion-content>\\n\";","import { EventEmitter, Component, Input, Output, ViewChild, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\n/**\r\n * Container class for a captured webcam image\r\n * @author basst314, davidshen84\r\n */\r\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@angular/common';\n\nconst _c0 = [\"video\"];\nconst _c1 = [\"canvas\"];\nfunction WebcamComponent_div_3_Template(rf, ctx) { if (rf & 1) {\n    const _r4 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 6);\n    ɵngcc0.ɵɵlistener(\"click\", function WebcamComponent_div_3_Template_div_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r4); const ctx_r3 = ɵngcc0.ɵɵnextContext(); return ctx_r3.rotateVideoInput(true); });\n    ɵngcc0.ɵɵelementEnd();\n} }\nclass WebcamImage {\r\n    constructor(imageAsDataUrl, mimeType, imageData) {\r\n        this._mimeType = null;\r\n        this._imageAsBase64 = null;\r\n        this._imageAsDataUrl = null;\r\n        this._imageData = null;\r\n        this._mimeType = mimeType;\r\n        this._imageAsDataUrl = imageAsDataUrl;\r\n        this._imageData = imageData;\r\n    }\r\n    /**\r\n     * Extracts the Base64 data out of the given dataUrl.\r\n     * @param dataUrl the given dataUrl\r\n     * @param mimeType the mimeType of the data\r\n     */\r\n    static getDataFromDataUrl(dataUrl, mimeType) {\r\n        return dataUrl.replace(`data:${mimeType};base64,`, '');\r\n    }\r\n    /**\r\n     * Get the base64 encoded image data\r\n     * @returns base64 data of the image\r\n     */\r\n    get imageAsBase64() {\r\n        return this._imageAsBase64 ? this._imageAsBase64\r\n            : this._imageAsBase64 = WebcamImage.getDataFromDataUrl(this._imageAsDataUrl, this._mimeType);\r\n    }\r\n    /**\r\n     * Get the encoded image as dataUrl\r\n     * @returns the dataUrl of the image\r\n     */\r\n    get imageAsDataUrl() {\r\n        return this._imageAsDataUrl;\r\n    }\r\n    /**\r\n     * Get the ImageData object associated with the canvas' 2d context.\r\n     * @returns the ImageData of the canvas's 2d context.\r\n     */\r\n    get imageData() {\r\n        return this._imageData;\r\n    }\r\n}\n\nclass WebcamUtil {\r\n    /**\r\n     * Lists available videoInput devices\r\n     * @returns a list of media device info.\r\n     */\r\n    static getAvailableVideoInputs() {\r\n        if (!navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices) {\r\n            return Promise.reject('enumerateDevices() not supported.');\r\n        }\r\n        return new Promise((resolve, reject) => {\r\n            navigator.mediaDevices.enumerateDevices()\r\n                .then((devices) => {\r\n                resolve(devices.filter((device) => device.kind === 'videoinput'));\r\n            })\r\n                .catch(err => {\r\n                reject(err.message || err);\r\n            });\r\n        });\r\n    }\r\n}\n\nclass WebcamComponent {\r\n    constructor() {\r\n        /** Defines the max width of the webcam area in px */\r\n        this.width = 640;\r\n        /** Defines the max height of the webcam area in px */\r\n        this.height = 480;\r\n        /** Defines base constraints to apply when requesting video track from UserMedia */\r\n        this.videoOptions = WebcamComponent.DEFAULT_VIDEO_OPTIONS;\r\n        /** Flag to enable/disable camera switch. If enabled, a switch icon will be displayed if multiple cameras were found */\r\n        this.allowCameraSwitch = true;\r\n        /** Flag to control whether an ImageData object is stored into the WebcamImage object. */\r\n        this.captureImageData = false;\r\n        /** The image type to use when capturing snapshots */\r\n        this.imageType = WebcamComponent.DEFAULT_IMAGE_TYPE;\r\n        /** The image quality to use when capturing snapshots (number between 0 and 1) */\r\n        this.imageQuality = WebcamComponent.DEFAULT_IMAGE_QUALITY;\r\n        /** EventEmitter which fires when an image has been captured */\r\n        this.imageCapture = new EventEmitter();\r\n        /** Emits a mediaError if webcam cannot be initialized (e.g. missing user permissions) */\r\n        this.initError = new EventEmitter();\r\n        /** Emits when the webcam video was clicked */\r\n        this.imageClick = new EventEmitter();\r\n        /** Emits the active deviceId after the active video device was switched */\r\n        this.cameraSwitched = new EventEmitter();\r\n        /** available video devices */\r\n        this.availableVideoInputs = [];\r\n        /** Indicates whether the video device is ready to be switched */\r\n        this.videoInitialized = false;\r\n        /** Index of active video in availableVideoInputs */\r\n        this.activeVideoInputIndex = -1;\r\n        /** MediaStream object in use for streaming UserMedia data */\r\n        this.mediaStream = null;\r\n        /** width and height of the active video stream */\r\n        this.activeVideoSettings = null;\r\n    }\r\n    /**\r\n     * If the given Observable emits, an image will be captured and emitted through 'imageCapture' EventEmitter\r\n     */\r\n    set trigger(trigger) {\r\n        if (this.triggerSubscription) {\r\n            this.triggerSubscription.unsubscribe();\r\n        }\r\n        // Subscribe to events from this Observable to take snapshots\r\n        this.triggerSubscription = trigger.subscribe(() => {\r\n            this.takeSnapshot();\r\n        });\r\n    }\r\n    /**\r\n     * If the given Observable emits, the active webcam will be switched to the one indicated by the emitted value.\r\n     * @param switchCamera Indicates which webcam to switch to\r\n     *   true: cycle forwards through available webcams\r\n     *   false: cycle backwards through available webcams\r\n     *   string: activate the webcam with the given id\r\n     */\r\n    set switchCamera(switchCamera) {\r\n        if (this.switchCameraSubscription) {\r\n            this.switchCameraSubscription.unsubscribe();\r\n        }\r\n        // Subscribe to events from this Observable to switch video device\r\n        this.switchCameraSubscription = switchCamera.subscribe((value) => {\r\n            if (typeof value === 'string') {\r\n                // deviceId was specified\r\n                this.switchToVideoInput(value);\r\n            }\r\n            else {\r\n                // direction was specified\r\n                this.rotateVideoInput(value !== false);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Get MediaTrackConstraints to request streaming the given device\r\n     * @param deviceId\r\n     * @param baseMediaTrackConstraints base constraints to merge deviceId-constraint into\r\n     * @returns\r\n     */\r\n    static getMediaConstraintsForDevice(deviceId, baseMediaTrackConstraints) {\r\n        const result = baseMediaTrackConstraints ? baseMediaTrackConstraints : this.DEFAULT_VIDEO_OPTIONS;\r\n        if (deviceId) {\r\n            result.deviceId = { exact: deviceId };\r\n        }\r\n        return result;\r\n    }\r\n    /**\r\n     * Tries to harvest the deviceId from the given mediaStreamTrack object.\r\n     * Browsers populate this object differently; this method tries some different approaches\r\n     * to read the id.\r\n     * @param mediaStreamTrack\r\n     * @returns deviceId if found in the mediaStreamTrack\r\n     */\r\n    static getDeviceIdFromMediaStreamTrack(mediaStreamTrack) {\r\n        if (mediaStreamTrack.getSettings && mediaStreamTrack.getSettings() && mediaStreamTrack.getSettings().deviceId) {\r\n            return mediaStreamTrack.getSettings().deviceId;\r\n        }\r\n        else if (mediaStreamTrack.getConstraints && mediaStreamTrack.getConstraints() && mediaStreamTrack.getConstraints().deviceId) {\r\n            const deviceIdObj = mediaStreamTrack.getConstraints().deviceId;\r\n            return WebcamComponent.getValueFromConstrainDOMString(deviceIdObj);\r\n        }\r\n    }\r\n    /**\r\n     * Tries to harvest the facingMode from the given mediaStreamTrack object.\r\n     * Browsers populate this object differently; this method tries some different approaches\r\n     * to read the value.\r\n     * @param mediaStreamTrack\r\n     * @returns facingMode if found in the mediaStreamTrack\r\n     */\r\n    static getFacingModeFromMediaStreamTrack(mediaStreamTrack) {\r\n        if (mediaStreamTrack) {\r\n            if (mediaStreamTrack.getSettings && mediaStreamTrack.getSettings() && mediaStreamTrack.getSettings().facingMode) {\r\n                return mediaStreamTrack.getSettings().facingMode;\r\n            }\r\n            else if (mediaStreamTrack.getConstraints && mediaStreamTrack.getConstraints() && mediaStreamTrack.getConstraints().facingMode) {\r\n                const facingModeConstraint = mediaStreamTrack.getConstraints().facingMode;\r\n                return WebcamComponent.getValueFromConstrainDOMString(facingModeConstraint);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Determines whether the given mediaStreamTrack claims itself as user facing\r\n     * @param mediaStreamTrack\r\n     */\r\n    static isUserFacing(mediaStreamTrack) {\r\n        const facingMode = WebcamComponent.getFacingModeFromMediaStreamTrack(mediaStreamTrack);\r\n        return facingMode ? 'user' === facingMode.toLowerCase() : false;\r\n    }\r\n    /**\r\n     * Extracts the value from the given ConstrainDOMString\r\n     * @param constrainDOMString\r\n     */\r\n    static getValueFromConstrainDOMString(constrainDOMString) {\r\n        if (constrainDOMString) {\r\n            if (constrainDOMString instanceof String) {\r\n                return String(constrainDOMString);\r\n            }\r\n            else if (Array.isArray(constrainDOMString) && Array(constrainDOMString).length > 0) {\r\n                return String(constrainDOMString[0]);\r\n            }\r\n            else if (typeof constrainDOMString === 'object') {\r\n                if (constrainDOMString['exact']) {\r\n                    return String(constrainDOMString['exact']);\r\n                }\r\n                else if (constrainDOMString['ideal']) {\r\n                    return String(constrainDOMString['ideal']);\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    ngAfterViewInit() {\r\n        this.detectAvailableDevices()\r\n            .then(() => {\r\n            // start video\r\n            this.switchToVideoInput(null);\r\n        })\r\n            .catch((err) => {\r\n            this.initError.next({ message: err });\r\n            // fallback: still try to load webcam, even if device enumeration failed\r\n            this.switchToVideoInput(null);\r\n        });\r\n    }\r\n    ngOnDestroy() {\r\n        this.stopMediaTracks();\r\n        this.unsubscribeFromSubscriptions();\r\n    }\r\n    /**\r\n     * Takes a snapshot of the current webcam's view and emits the image as an event\r\n     */\r\n    takeSnapshot() {\r\n        // set canvas size to actual video size\r\n        const _video = this.nativeVideoElement;\r\n        const dimensions = { width: this.width, height: this.height };\r\n        if (_video.videoWidth) {\r\n            dimensions.width = _video.videoWidth;\r\n            dimensions.height = _video.videoHeight;\r\n        }\r\n        const _canvas = this.canvas.nativeElement;\r\n        _canvas.width = dimensions.width;\r\n        _canvas.height = dimensions.height;\r\n        // paint snapshot image to canvas\r\n        const context2d = _canvas.getContext('2d');\r\n        context2d.drawImage(_video, 0, 0);\r\n        // read canvas content as image\r\n        const mimeType = this.imageType ? this.imageType : WebcamComponent.DEFAULT_IMAGE_TYPE;\r\n        const quality = this.imageQuality ? this.imageQuality : WebcamComponent.DEFAULT_IMAGE_QUALITY;\r\n        const dataUrl = _canvas.toDataURL(mimeType, quality);\r\n        // get the ImageData object from the canvas' context.\r\n        let imageData = null;\r\n        if (this.captureImageData) {\r\n            imageData = context2d.getImageData(0, 0, _canvas.width, _canvas.height);\r\n        }\r\n        this.imageCapture.next(new WebcamImage(dataUrl, mimeType, imageData));\r\n    }\r\n    /**\r\n     * Switches to the next/previous video device\r\n     * @param forward\r\n     */\r\n    rotateVideoInput(forward) {\r\n        if (this.availableVideoInputs && this.availableVideoInputs.length > 1) {\r\n            const increment = forward ? 1 : (this.availableVideoInputs.length - 1);\r\n            const nextInputIndex = (this.activeVideoInputIndex + increment) % this.availableVideoInputs.length;\r\n            this.switchToVideoInput(this.availableVideoInputs[nextInputIndex].deviceId);\r\n        }\r\n    }\r\n    /**\r\n     * Switches the camera-view to the specified video device\r\n     */\r\n    switchToVideoInput(deviceId) {\r\n        this.videoInitialized = false;\r\n        this.stopMediaTracks();\r\n        this.initWebcam(deviceId, this.videoOptions);\r\n    }\r\n    /**\r\n     * Event-handler for video resize event.\r\n     * Triggers Angular change detection so that new video dimensions get applied\r\n     */\r\n    videoResize() {\r\n        // here to trigger Angular change detection\r\n    }\r\n    get videoWidth() {\r\n        const videoRatio = this.getVideoAspectRatio();\r\n        return Math.min(this.width, this.height * videoRatio);\r\n    }\r\n    get videoHeight() {\r\n        const videoRatio = this.getVideoAspectRatio();\r\n        return Math.min(this.height, this.width / videoRatio);\r\n    }\r\n    get videoStyleClasses() {\r\n        let classes = '';\r\n        if (this.isMirrorImage()) {\r\n            classes += 'mirrored ';\r\n        }\r\n        return classes.trim();\r\n    }\r\n    get nativeVideoElement() {\r\n        return this.video.nativeElement;\r\n    }\r\n    /**\r\n     * Returns the video aspect ratio of the active video stream\r\n     */\r\n    getVideoAspectRatio() {\r\n        // calculate ratio from video element dimensions if present\r\n        const videoElement = this.nativeVideoElement;\r\n        if (videoElement.videoWidth && videoElement.videoWidth > 0 &&\r\n            videoElement.videoHeight && videoElement.videoHeight > 0) {\r\n            return videoElement.videoWidth / videoElement.videoHeight;\r\n        }\r\n        // nothing present - calculate ratio based on width/height params\r\n        return this.width / this.height;\r\n    }\r\n    /**\r\n     * Init webcam live view\r\n     */\r\n    initWebcam(deviceId, userVideoTrackConstraints) {\r\n        const _video = this.nativeVideoElement;\r\n        if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\r\n            // merge deviceId -> userVideoTrackConstraints\r\n            const videoTrackConstraints = WebcamComponent.getMediaConstraintsForDevice(deviceId, userVideoTrackConstraints);\r\n            navigator.mediaDevices.getUserMedia({ video: videoTrackConstraints })\r\n                .then((stream) => {\r\n                this.mediaStream = stream;\r\n                _video.srcObject = stream;\r\n                _video.play();\r\n                this.activeVideoSettings = stream.getVideoTracks()[0].getSettings();\r\n                const activeDeviceId = WebcamComponent.getDeviceIdFromMediaStreamTrack(stream.getVideoTracks()[0]);\r\n                this.cameraSwitched.next(activeDeviceId);\r\n                // Initial detect may run before user gave permissions, returning no deviceIds. This prevents later camera switches. (#47)\r\n                // Run detect once again within getUserMedia callback, to make sure this time we have permissions and get deviceIds.\r\n                this.detectAvailableDevices()\r\n                    .then(() => {\r\n                    this.activeVideoInputIndex = activeDeviceId ? this.availableVideoInputs\r\n                        .findIndex((mediaDeviceInfo) => mediaDeviceInfo.deviceId === activeDeviceId) : -1;\r\n                    this.videoInitialized = true;\r\n                })\r\n                    .catch(() => {\r\n                    this.activeVideoInputIndex = -1;\r\n                    this.videoInitialized = true;\r\n                });\r\n            })\r\n                .catch((err) => {\r\n                this.initError.next({ message: err.message, mediaStreamError: err });\r\n            });\r\n        }\r\n        else {\r\n            this.initError.next({ message: 'Cannot read UserMedia from MediaDevices.' });\r\n        }\r\n    }\r\n    getActiveVideoTrack() {\r\n        return this.mediaStream ? this.mediaStream.getVideoTracks()[0] : null;\r\n    }\r\n    isMirrorImage() {\r\n        if (!this.getActiveVideoTrack()) {\r\n            return false;\r\n        }\r\n        // check for explicit mirror override parameter\r\n        {\r\n            let mirror = 'auto';\r\n            if (this.mirrorImage) {\r\n                if (typeof this.mirrorImage === 'string') {\r\n                    mirror = String(this.mirrorImage).toLowerCase();\r\n                }\r\n                else {\r\n                    // WebcamMirrorProperties\r\n                    if (this.mirrorImage.x) {\r\n                        mirror = this.mirrorImage.x.toLowerCase();\r\n                    }\r\n                }\r\n            }\r\n            switch (mirror) {\r\n                case 'always':\r\n                    return true;\r\n                case 'never':\r\n                    return false;\r\n            }\r\n        }\r\n        // default: enable mirroring if webcam is user facing\r\n        return WebcamComponent.isUserFacing(this.getActiveVideoTrack());\r\n    }\r\n    /**\r\n     * Stops all active media tracks.\r\n     * This prevents the webcam from being indicated as active,\r\n     * even if it is no longer used by this component.\r\n     */\r\n    stopMediaTracks() {\r\n        if (this.mediaStream && this.mediaStream.getTracks) {\r\n            // getTracks() returns all media tracks (video+audio)\r\n            this.mediaStream.getTracks()\r\n                .forEach((track) => track.stop());\r\n        }\r\n    }\r\n    /**\r\n     * Unsubscribe from all open subscriptions\r\n     */\r\n    unsubscribeFromSubscriptions() {\r\n        if (this.triggerSubscription) {\r\n            this.triggerSubscription.unsubscribe();\r\n        }\r\n        if (this.switchCameraSubscription) {\r\n            this.switchCameraSubscription.unsubscribe();\r\n        }\r\n    }\r\n    /**\r\n     * Reads available input devices\r\n     */\r\n    detectAvailableDevices() {\r\n        return new Promise((resolve, reject) => {\r\n            WebcamUtil.getAvailableVideoInputs()\r\n                .then((devices) => {\r\n                this.availableVideoInputs = devices;\r\n                resolve(devices);\r\n            })\r\n                .catch(err => {\r\n                this.availableVideoInputs = [];\r\n                reject(err);\r\n            });\r\n        });\r\n    }\r\n}\nWebcamComponent.ɵfac = function WebcamComponent_Factory(t) { return new (t || WebcamComponent)(); };\nWebcamComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: WebcamComponent, selectors: [[\"webcam\"]], viewQuery: function WebcamComponent_Query(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(_c0, 3);\n        ɵngcc0.ɵɵviewQuery(_c1, 3);\n    } if (rf & 2) {\n        let _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.video = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.canvas = _t.first);\n    } }, inputs: { width: \"width\", height: \"height\", videoOptions: \"videoOptions\", allowCameraSwitch: \"allowCameraSwitch\", captureImageData: \"captureImageData\", imageType: \"imageType\", imageQuality: \"imageQuality\", trigger: \"trigger\", switchCamera: \"switchCamera\", mirrorImage: \"mirrorImage\" }, outputs: { imageCapture: \"imageCapture\", initError: \"initError\", imageClick: \"imageClick\", cameraSwitched: \"cameraSwitched\" }, decls: 6, vars: 7, consts: [[1, \"webcam-wrapper\", 3, \"click\"], [\"autoplay\", \"\", \"muted\", \"\", \"playsinline\", \"\", 3, \"width\", \"height\", \"resize\"], [\"video\", \"\"], [\"class\", \"camera-switch\", 3, \"click\", 4, \"ngIf\"], [3, \"width\", \"height\"], [\"canvas\", \"\"], [1, \"camera-switch\", 3, \"click\"]], template: function WebcamComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵlistener(\"click\", function WebcamComponent_Template_div_click_0_listener() { return ctx.imageClick.next(); });\n        ɵngcc0.ɵɵelementStart(1, \"video\", 1, 2);\n        ɵngcc0.ɵɵlistener(\"resize\", function WebcamComponent_Template_video_resize_1_listener() { return ctx.videoResize(); });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(3, WebcamComponent_div_3_Template, 1, 0, \"div\", 3);\n        ɵngcc0.ɵɵelement(4, \"canvas\", 4, 5);\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵclassMap(ctx.videoStyleClasses);\n        ɵngcc0.ɵɵproperty(\"width\", ctx.videoWidth)(\"height\", ctx.videoHeight);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.allowCameraSwitch && ctx.availableVideoInputs.length > 1 && ctx.videoInitialized);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"width\", ctx.width)(\"height\", ctx.height);\n    } }, directives: [ɵngcc1.NgIf], styles: [\".webcam-wrapper[_ngcontent-%COMP%]{display:inline-block;line-height:0;position:relative}.webcam-wrapper[_ngcontent-%COMP%]   video.mirrored[_ngcontent-%COMP%]{transform:scaleX(-1)}.webcam-wrapper[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{display:none}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.1);background-image:url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAE9UlEQVR42u2aT2hdRRTGf+cRQqghSqihdBFDkRISK2KDfzDWxHaRQHEhaINKqa1gKQhd6EZLN+IidCH+Q0oWIkVRC21BQxXRitVaSbKoJSGtYGoK2tQ/tU1jY5v0c5F54Xl7b/KSO/PyEt+3e5f75p7zzZwzZ74zUEIJJfyfYaEGllQGVAGZlENdBy6Z2cSiYFTSKkkfS/pH/nBF0kFJdUW9AiRVASeAukD8DgNrzOySrwEzng18KaDzALXuG8W3AiStAvqBisBRNg40mtlPxbYCOgvgPO4bncWW+JpVeDQXRQhIygDfA00F5r0XuNfMrgclQFI98DDQCNQA5ZFXqoCWBVp8XwHRHeEqcN7loy/NbHBesyqpQ1KfFj/6nC+ZvFaApFrgPaCZpYVvgCfNbDiRAElNwGFg+RIt/X8H2s2s9wYCJDUAR4HqJX7++RN40MwGpgmQVAH0AQ2BPz4AHHPl8nBOAqtyFWQjsA6oL4Ada81sPDv7uwImod8kvSJp9RyS8O2SXnb/DYVd2Y9VSroQ4ANXJO2WVJmixqh0kzMWwL4LkiqRtDnA4D1zmfE8j9g9AezcnAHaPcfXdbfdnPZ2Yps6+DwAvO/Z1naTdApY7Xng48BDZnY1MpMVQBuw3iXc5Tnb0wBwBPjUzP6eoezuArZ6svM0geJLkvZEYnl3nkntoqROSbckSW2Suj3ZOIangc7GPJuUtNGdFIfmMeavktoSSKiW9LMPw30Q8JqkekmjCbOZRhuclLQjgYSNxUBAj6RyZ9ATgUJpUtJTCSR8vpAEXHAyWK5BXYFIGHOlepSAloUk4NEYgyoknQhEwhFJ0e8h6VSaQeerCb5uZgdi9utxYBNwOUD93hIVXswM4INCi6K9wAszFC2DwLOBDjHbYp59karIUnRdzYy/3ClqVklaUhfwTICj7K25OqA7a4wWagVsm4Me/xzwg2cCqqONFzO7DPxSCAJi436GUBgHHguQD2oTlJ55oSzP9ybccsttSJw1szdjFOSnI/8dTCGZHwcORp4Nx7y3B1iZ8/sm4MW8/Euxg5wIsS/HaAp3zeP4/G7obRDXI4jiTIA22H7Xdc7X+S3A5lC7QBQ357aq3VAjCeSkwUfAJrfvz+R8A9ADLAtZB+TinpjC5JMA+//jwPZZnF8G7J+L8z4IWB/zbG+gIujVWfLBW/NStVMmqaG4POJRsIjix7h8IGnLQuoBbQki5sVAJHyYm7YkNaRRtXwQ8G1cHpX0iKRrgUjYno17Sf0LrQhJUkdCeHWkVITGJI0k1QeS3ikGSUzOyJUJJNznYneuOCnpTldcxa2kP3xJYqOeSDjqZG8ShJLnE8TTuMS6Iyu1BW7djZqkfo9N0QOuYJmYQddfB7RG+gLTNzqAY9FrL+5/nwEbvDdJJe3zzOrhNP3AWRqmk55t3ZcBuj3b2gb0Sbrbo/NNzk7fFzu7s/E5EiC+rrmeQU0Kx2skvRFoOx2ZzlmSdgbsw49JetvtBpk8nM64d/cGbNtJ0s7cGyJlwHeEv+t3nqnLSgPAUOSGyG3AHUxdzqoJbEcvcL+ZTeTeEapzJKxgaeOcc/7Mf06D7kFrguS0VDAMtGadv+E47DT9tcChJej8ISfpD+abgTe45uOkFi8mnQ+JBVQ+d4VXuOptjavcyot8pq86mfwk8LWZnaOEEkoooYQSSojDv8AhQNeGfe0jAAAAAElFTkSuQmCC\\\");background-position:50%;background-repeat:no-repeat;background-size:80%;border-radius:5px;cursor:pointer;height:48px;position:absolute;right:13px;top:10px;transition:background-color .2s ease;width:48px}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.18)}\"] });\r\nWebcamComponent.DEFAULT_VIDEO_OPTIONS = { facingMode: 'environment' };\r\nWebcamComponent.DEFAULT_IMAGE_TYPE = 'image/jpeg';\r\nWebcamComponent.DEFAULT_IMAGE_QUALITY = 0.92;\r\nWebcamComponent.propDecorators = {\r\n    width: [{ type: Input }],\r\n    height: [{ type: Input }],\r\n    videoOptions: [{ type: Input }],\r\n    allowCameraSwitch: [{ type: Input }],\r\n    mirrorImage: [{ type: Input }],\r\n    captureImageData: [{ type: Input }],\r\n    imageType: [{ type: Input }],\r\n    imageQuality: [{ type: Input }],\r\n    imageCapture: [{ type: Output }],\r\n    initError: [{ type: Output }],\r\n    imageClick: [{ type: Output }],\r\n    cameraSwitched: [{ type: Output }],\r\n    video: [{ type: ViewChild, args: ['video', { static: true },] }],\r\n    canvas: [{ type: ViewChild, args: ['canvas', { static: true },] }],\r\n    trigger: [{ type: Input }],\r\n    switchCamera: [{ type: Input }]\r\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(WebcamComponent, [{\n        type: Component,\n        args: [{\n                selector: 'webcam',\n                template: \"<div class=\\\"webcam-wrapper\\\" (click)=\\\"imageClick.next();\\\">\\r\\n  <video #video [width]=\\\"videoWidth\\\" [height]=\\\"videoHeight\\\" [class]=\\\"videoStyleClasses\\\" autoplay muted playsinline (resize)=\\\"videoResize()\\\"></video>\\r\\n  <div class=\\\"camera-switch\\\" *ngIf=\\\"allowCameraSwitch && availableVideoInputs.length > 1 && videoInitialized\\\" (click)=\\\"rotateVideoInput(true)\\\"></div>\\r\\n  <canvas #canvas [width]=\\\"width\\\" [height]=\\\"height\\\"></canvas>\\r\\n</div>\\r\\n\",\n                styles: [\".webcam-wrapper{display:inline-block;line-height:0;position:relative}.webcam-wrapper video.mirrored{transform:scaleX(-1)}.webcam-wrapper canvas{display:none}.webcam-wrapper .camera-switch{background-color:rgba(0,0,0,.1);background-image:url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAE9UlEQVR42u2aT2hdRRTGf+cRQqghSqihdBFDkRISK2KDfzDWxHaRQHEhaINKqa1gKQhd6EZLN+IidCH+Q0oWIkVRC21BQxXRitVaSbKoJSGtYGoK2tQ/tU1jY5v0c5F54Xl7b/KSO/PyEt+3e5f75p7zzZwzZ74zUEIJJfyfYaEGllQGVAGZlENdBy6Z2cSiYFTSKkkfS/pH/nBF0kFJdUW9AiRVASeAukD8DgNrzOySrwEzng18KaDzALXuG8W3AiStAvqBisBRNg40mtlPxbYCOgvgPO4bncWW+JpVeDQXRQhIygDfA00F5r0XuNfMrgclQFI98DDQCNQA5ZFXqoCWBVp8XwHRHeEqcN7loy/NbHBesyqpQ1KfFj/6nC+ZvFaApFrgPaCZpYVvgCfNbDiRAElNwGFg+RIt/X8H2s2s9wYCJDUAR4HqJX7++RN40MwGpgmQVAH0AQ2BPz4AHHPl8nBOAqtyFWQjsA6oL4Ada81sPDv7uwImod8kvSJp9RyS8O2SXnb/DYVd2Y9VSroQ4ANXJO2WVJmixqh0kzMWwL4LkiqRtDnA4D1zmfE8j9g9AezcnAHaPcfXdbfdnPZ2Yps6+DwAvO/Z1naTdApY7Xng48BDZnY1MpMVQBuw3iXc5Tnb0wBwBPjUzP6eoezuArZ6svM0geJLkvZEYnl3nkntoqROSbckSW2Suj3ZOIangc7GPJuUtNGdFIfmMeavktoSSKiW9LMPw30Q8JqkekmjCbOZRhuclLQjgYSNxUBAj6RyZ9ATgUJpUtJTCSR8vpAEXHAyWK5BXYFIGHOlepSAloUk4NEYgyoknQhEwhFJ0e8h6VSaQeerCb5uZgdi9utxYBNwOUD93hIVXswM4INCi6K9wAszFC2DwLOBDjHbYp59karIUnRdzYy/3ClqVklaUhfwTICj7K25OqA7a4wWagVsm4Me/xzwg2cCqqONFzO7DPxSCAJi436GUBgHHguQD2oTlJ55oSzP9ybccsttSJw1szdjFOSnI/8dTCGZHwcORp4Nx7y3B1iZ8/sm4MW8/Euxg5wIsS/HaAp3zeP4/G7obRDXI4jiTIA22H7Xdc7X+S3A5lC7QBQ357aq3VAjCeSkwUfAJrfvz+R8A9ADLAtZB+TinpjC5JMA+//jwPZZnF8G7J+L8z4IWB/zbG+gIujVWfLBW/NStVMmqaG4POJRsIjix7h8IGnLQuoBbQki5sVAJHyYm7YkNaRRtXwQ8G1cHpX0iKRrgUjYno17Sf0LrQhJUkdCeHWkVITGJI0k1QeS3ikGSUzOyJUJJNznYneuOCnpTldcxa2kP3xJYqOeSDjqZG8ShJLnE8TTuMS6Iyu1BW7djZqkfo9N0QOuYJmYQddfB7RG+gLTNzqAY9FrL+5/nwEbvDdJJe3zzOrhNP3AWRqmk55t3ZcBuj3b2gb0Sbrbo/NNzk7fFzu7s/E5EiC+rrmeQU0Kx2skvRFoOx2ZzlmSdgbsw49JetvtBpk8nM64d/cGbNtJ0s7cGyJlwHeEv+t3nqnLSgPAUOSGyG3AHUxdzqoJbEcvcL+ZTeTeEapzJKxgaeOcc/7Mf06D7kFrguS0VDAMtGadv+E47DT9tcChJej8ISfpD+abgTe45uOkFi8mnQ+JBVQ+d4VXuOptjavcyot8pq86mfwk8LWZnaOEEkoooYQSSojDv8AhQNeGfe0jAAAAAElFTkSuQmCC\\\");background-position:50%;background-repeat:no-repeat;background-size:80%;border-radius:5px;cursor:pointer;height:48px;position:absolute;right:13px;top:10px;transition:background-color .2s ease;width:48px}.webcam-wrapper .camera-switch:hover{background-color:rgba(0,0,0,.18)}\"]\n            }]\n    }], function () { return []; }, { width: [{\n            type: Input\n        }], height: [{\n            type: Input\n        }], videoOptions: [{\n            type: Input\n        }], allowCameraSwitch: [{\n            type: Input\n        }], captureImageData: [{\n            type: Input\n        }], imageType: [{\n            type: Input\n        }], imageQuality: [{\n            type: Input\n        }], imageCapture: [{\n            type: Output\n        }], initError: [{\n            type: Output\n        }], imageClick: [{\n            type: Output\n        }], cameraSwitched: [{\n            type: Output\n        }], trigger: [{\n            type: Input\n        }], switchCamera: [{\n            type: Input\n        }], mirrorImage: [{\n            type: Input\n        }], video: [{\n            type: ViewChild,\n            args: ['video', { static: true }]\n        }], canvas: [{\n            type: ViewChild,\n            args: ['canvas', { static: true }]\n        }] }); })();\n\nconst COMPONENTS = [\r\n    WebcamComponent\r\n];\r\nclass WebcamModule {\r\n}\nWebcamModule.ɵfac = function WebcamModule_Factory(t) { return new (t || WebcamModule)(); };\nWebcamModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: WebcamModule });\nWebcamModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ imports: [[\n            CommonModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(WebcamModule, { declarations: function () { return [WebcamComponent]; }, imports: function () { return [CommonModule]; }, exports: function () { return [WebcamComponent]; } }); })();\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(WebcamModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule\n                ],\n                declarations: [\n                    COMPONENTS\n                ],\n                exports: [\n                    COMPONENTS\n                ]\n            }]\n    }], null, null); })();\n\nclass WebcamInitError {\r\n    constructor() {\r\n        this.message = null;\r\n        this.mediaStreamError = null;\r\n    }\r\n}\n\nclass WebcamMirrorProperties {\r\n}\n\n/**\r\n * Generated bundle index. Do not edit.\r\n */\n\nexport { WebcamComponent, WebcamImage, WebcamInitError, WebcamMirrorProperties, WebcamModule, WebcamUtil };\n\n//# sourceMappingURL=ngx-webcam.js.map","import { Component, OnInit, Output, EventEmitter } from '@angular/core';\nimport {ActivatedRoute, Router} from '@angular/router'\nimport {Subject, Observable} from 'rxjs';\nimport {LoadingController, AlertController} from '@ionic/angular'\nimport {WebcamImage, WebcamInitError, WebcamUtil} from 'ngx-webcam';\nimport axios from 'axios';\nimport { api, munaApi } from '../server';\nimport * as moment from 'moment';\nimport { Storage } from '@ionic/storage-angular';\n\n@Component({\n  selector: 'app-patient',\n  templateUrl: './patient.page.html',\n  styleUrls: ['./patient.page.scss']\n})\nexport class PatientPage implements OnInit {\n  @Output()\n  public pictureTaken = new EventEmitter<WebcamImage>();\n\n  // toggle webcam on/off\n  public showWebcam = true;\n  public allowCameraSwitch = true;\n  public multipleWebcamsAvailable = false;\n  public deviceId: string;\n  public videoOptions: MediaTrackConstraints = {\n    // width: {ideal: 1024},\n    // height: {ideal: 576}\n  };\n  public errors: WebcamInitError[] = [];\n\n  // webcam snapshot trigger\n  private trigger: Subject<void> = new Subject<void>();\n  // switch to next / previous / specific webcam; true/false: forward/backwards, string: deviceId\n  private nextWebcam: Subject<boolean|string> = new Subject<boolean|string>();\n\n  public triggerSnapshot(): void {\n    this.trigger.next();\n  }\n\n  public toggleWebcam(): void {\n    this.showWebcam = !this.showWebcam;\n  }\n\n  public handleInitError(error: WebcamInitError): void {\n    this.errors.push(error);\n  }\n\n  public showNextWebcam(directionOrDeviceId: boolean|string): void {\n    // true => move forward through devices\n    // false => move backwards through devices\n    // string => move to device with given deviceId\n    this.nextWebcam.next(directionOrDeviceId);\n  }\n\n  public handleImage(webcamImage: WebcamImage): void {\n    console.info('received webcam image', webcamImage);\n    this.pictureTaken.emit(webcamImage);\n    this.snapshot = webcamImage.imageAsDataUrl\n    this.toggleWebcam()\n    // axios.post(api + 'upload',{\n    //   image: webcamImage\n    // }).then(res => {\n    //   console.log(res);\n      \n    // })\n  }\n\n  public cameraWasSwitched(deviceId: string): void {\n    console.log('active device: ' + deviceId);\n    this.deviceId = deviceId;\n  }\n\n  public get triggerObservable(): Observable<void> {\n    return this.trigger.asObservable();\n  }\n\n  public get nextWebcamObservable(): Observable<boolean|string> {\n    return this.nextWebcam.asObservable();\n  }\n\n  constructor(\n    public route: ActivatedRoute,\n    public loadingCtrl: LoadingController,\n    public alertCtrl: AlertController,\n    public router: Router,\n    public storage: Storage\n  ) { }\n\n  isNewPatient = true;\n  snapshot = '';\n\n  data = {\n      name: '',\n      enName: '',\n      gender: null,\n      address: '...',\n      dob: null,\n      phone: null,\n      weight: 0,\n      height: 0,\n      relationship: 0,\n      nationalityId: 0,\n      documentId: null,\n      email: '',\n      smoker: 0,\n      fasting: 0,\n      munaId: null,\n      certificateNo: null,\n      legal:1,\n      createdBy: '1',\n      documentPhoto:{\n        photoPath:''\n      }\n  };\n\n  files = null;\n  documentImage = '';\n  muna = false;\n  documentName = '';\n  id;\n  api = api;\n  nationalities = [];\n  userinfo:any;\n\n  ngOnInit() {\n    console.log(this.id);\n    \n\n    this.storage.get(\"user\").then(res => {\n      this.userinfo = res.data;\n      console.log(this.userinfo);\n      \n      this.data.createdBy = res.data.idUser\n    })\n    axios.get(api + 'nationalities').then(res => {\n      this.nationalities = res.data\n    }).catch(err => {\n      console.log(err);\n      \n    })\n    WebcamUtil.getAvailableVideoInputs()\n      .then((mediaDevices: MediaDeviceInfo[]) => {\n        this.multipleWebcamsAvailable = mediaDevices && mediaDevices.length > 1;\n      });\n\n    this.route.paramMap.subscribe(async param => {\n      if (param['params']['id'] != 'new') {\n        let loading = await this.loadingCtrl.create({\n          message: 'Please wait...'\n        });\n        await loading.present();\n        this.isNewPatient = false;\n        axios.get(api + 'patient/' + param['params']['id']).then(res => {\n          this.data = res.data\n          this.snapshot = api + res.data.image.photoPath\n          this.toggleWebcam();\n        }).finally(async () => {\n          await loading.dismiss();\n        });\n        \n      }\n    })\n    \n  }\n\n  retakePhoto() {\n    this.snapshot = '';\n    this.toggleWebcam();\n\n  }\n\n  onFileChange(event){\n    this.files = event.target.files;\n    console.log(event.target.files[0]);\n    this.documentName = event.target.files[0]['name']\n  }\n\n  fixDate() {\n    this.data.dob = moment(this.data.dob).format('YYYY-MM-DD');\n  }\n  async save() {\n    let loading = await this.loadingCtrl.create({\n      message: 'Please wait...'\n    });\n    await loading.present();\n\n\n    if (this.muna) {\n      let munaData = {\n        data: {\n           type: \"identity\",\n           attributes: {\n              //email: this.data.email,\n              passport: this.data.documentId,\n           },\n        },\n     };\n\n     // CHECK IF PASSPORT EXISTS\n     axios.get('http://192.168.0.254:5555/identities?filter[passport]=' + this.data.documentId).then(async res => {\n       let ptnt = res.data.data;\n       if (ptnt.length > 0) {\n        this.data.munaId = ptnt[0].attributes.address\n        this.saveToDb()\n       } else {\n         console.log(JSON.stringify(munaData));\n         \n        axios\n        .post(munaApi + \"identities\", JSON.stringify(munaData))\n        .then((response) => {\n           this.data.munaId = response.data.data.id\n           this.saveToDb()\n        })\n        .catch((error) => {\n           console.log(error);\n        })\n       }\n     }).finally(async () => {\n      await loading.dismiss();\n     });\n     \n    } else {\n      this.saveToDb();\n      await loading.dismiss();\n    }\n\n    \n    \n  }\n\n  ionViewWillLeave() {\n    if (this.snapshot == '') {\n      this.showWebcam = false\n    }\n  }\n\n\nasync edit() {\n  this.data.createdBy = '1'\n  let loading = await this.loadingCtrl.create({\n    message: 'Please wait...'\n  });\n  await loading.present();\n  axios.put(api + 'patient/' + this.data['idPatient'] , this.data).then( res => {\n    console.log(res.data);\n    \n  }).finally(async() => {\n    await loading.dismiss()\n  })\n\n}\n\n\n  async saveToDb() {\n    var bodyFormData = new FormData();\n    console.log(this.data);\n    this.data.nationalityId = this.data.nationalityId['idNationality'];\n\n    if (this.userinfo['roleId'] == 5) {\n      this.data.legal = 0;\n    }\n    \n\n    bodyFormData.append('patient', JSON.stringify(this.data)); \n    bodyFormData.append('image', this.snapshot); \n    if (this.files != null) {\n      bodyFormData.append('document', this.files[0]); \n    }\n    \n    axios({\n      method: \"post\",\n      url: api + 'addPatient',\n      data: bodyFormData,\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    })\n      .then(async (response) => {\n        console.log(response);\n        let patient = response.data;\n        let message = await this.alertCtrl.create({\n          header: 'Patient added successfully.',\n          message: 'Do you want to submit a new test for this patient?',\n          buttons: [\n            {\n              text: 'Yes',\n              handler: () => {\n                // ADD TEST\n                this.router.navigateByUrl('/patients/' + patient.id + '/tests')\n              }\n            },\n            {\n              text: 'No',\n              role: 'cancel',\n              handler: () => {\n                this.router.navigateByUrl('/patients')\n              }\n            }\n          ]\n        })\n        await message.present();\n      })\n      .catch(async (response) => {\n        let message = await this.alertCtrl.create({\n          header:'Error',\n          subHeader: 'Please check all required fields.'\n        });\n        await message.present();\n      }).finally(async () => {\n        \n        \n      });\n  }\n\n  generateEmail() {\n    this.data.email = this.data.documentId + '.nationallab@gmail.com'\n\n    \n\n  }\n\n  async search() {\n    axios.get(api + 'findPatient?search=' + this.data.documentId).then(async res => {\n      if (res.data.length > 0) {\n        let message = await this.alertCtrl.create({\n          message: 'This patient is already exist.',\n          buttons:['OK']\n        });\n        await message.present();\n      }\n    })\n  }\n}\n"],"sourceRoot":"webpack:///"}